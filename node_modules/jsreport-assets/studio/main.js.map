{"version":3,"sources":["webpack:///webpack/bootstrap 4d3d77d744f9cad34a0d","webpack:///./studio/main_dev.js","webpack:///./studio/AssetEditor.js","webpack:///external \"Studio.libraries['react']\"","webpack:///./studio/AssetUploadButton.js","webpack:///external \"Studio\"","webpack:///external \"Studio.libraries['superagent']\"","webpack:///external \"Studio.libraries['bluebird']\"","webpack:///./~/react-copy-to-clipboard/lib/index.js","webpack:///./~/react-copy-to-clipboard/lib/Component.js","webpack:///./~/copy-to-clipboard/index.js","webpack:///./~/toggle-selection/index.js","webpack:///./studio/NewAssetModal.js","webpack:///./studio/AssetProperties.js"],"names":["addEntitySet","name","faIcon","visibleName","onNew","openModal","referenceAttributes","entityTreePosition","addEditorComponent","addToolbarComponent","addPropertiesComponent","title","entity","__entitySet","entityTreeIconResolvers","push","parts","split","length","extension","isSharedHelper","getTextFromApi","path","resolve","reject","request","get","resolveUrl","end","err","text","Error","toString","FileEditor","state","props","content","link","saveEntity","_id","api","responseType","ab","str","String","fromCharCode","apply","Uint8Array","fixedStr","decodeURIComponent","escape","btoa","unescape","encodeURIComponent","setState","loadError","prevProps","loadFailed","message","match","isImage","isFont","getFormat","overflow","Date","getTime","display","margin","newStyle","document","createElement","appendChild","createTextNode","head","fontFamily","padding","mode","forceUpdate","atob","v","onUpdate","Object","assign","downloadUrl","toolbarButtonStyle","color","fontSize","backgroundColor","getEmbeddingCode","OpenUpload","marginRight","renderEditor","_fileUploadButton","AssetUploadButton","e","target","files","file","reader","FileReader","onloadend","refs","value","type","workspaces","save","post","data","result","substring","indexOf","response","addExistingEntity","openTab","updateEntity","tab","patch","loadEntity","onerror","alert","readAsDataURL","dispatchEvent","MouseEvent","window","upload","renderUpload","openFileDialog","NewAssetModal","isLink","key","createAsset","setTimeout","focus","error","close","handleKeyPress","extensions","assets","options","allowAssetsLinkedToFiles","opacity","OpenUploadNew","propTypes","func","isRequired","AssetProperties","onChange","checked","entities"],"mappings":"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,oCAAoC,6DAA6D,oBAAoB,EAAE,eAAe;;AAE1N;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,0DAAyD,UAAU,wBAAwB;AAC3F;AACA,EAAC;AACD;AACA,sC;;;;;;ACrEA;;AAEA;;AAEA,4CAA2C,IAAI;;AAE/C;AACA;AACA,6BAA4B,UAAU;AACtC;;AAEA;AACA;AACA,kBAAiB,cAAc;AAC/B;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;;AC5EA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kBAAiB,0BAA0B;AAC3C;AACA;;AAEA,0CAAyC;AACzC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACtCA;;;;AACA;;;;AACA;;;;;;;;;;;;;;KAEqBkC,a;;;AAKnB,4BAAe;AAAA;;AAAA;;AAEb,WAAK7F,KAAL,GAAa,EAAE8F,QAAQ,KAAV,EAAb;AAFa;AAGd;;;;oCAEelC,C,EAAG;AACjB,WAAIA,EAAEmC,GAAF,KAAU,OAAd,EAAuB;AACrB,cAAKC,WAAL;AACD;AACF;;AAED;;;;yCACqB;AAAA;;AACnBC,kBAAW;AAAA,gBAAM,OAAK9B,IAAL,CAAUpG,IAAV,CAAemI,KAAf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","file":"./studio/main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 4d3d77d744f9cad34a0d\n **/","import AssetEditor from './AssetEditor.js'\r\nimport AssetUploadButton from './AssetUploadButton.js'\r\nimport NewAssetModal from './NewAssetModal.js'\r\nimport AssetProperties from './AssetProperties.js'\r\nimport Studio from 'jsreport-studio'\r\n\r\nStudio.addEntitySet({\r\n  name: 'assets',\r\n  faIcon: 'fa-file',\r\n  visibleName: 'asset',\r\n  onNew: () => Studio.openModal(NewAssetModal),\r\n  referenceAttributes: ['isSharedHelper'],\r\n  entityTreePosition: 700\r\n})\r\n\r\nStudio.addEditorComponent('assets', AssetEditor)\r\nStudio.addToolbarComponent(AssetUploadButton)\r\nStudio.addPropertiesComponent(AssetProperties.title, AssetProperties, (entity) => entity.__entitySet === 'assets')\r\n\r\nStudio.entityTreeIconResolvers.push((entity) => {\r\n  if (entity.__entitySet !== 'assets') {\r\n    return\r\n  }\r\n\r\n  const parts = entity.name.split('.')\r\n\r\n  if (parts.length === 1) {\r\n    return\r\n  }\r\n\r\n  const extension = parts[parts.length - 1]\r\n\r\n  switch (extension) {\r\n    case 'html': return 'fa-html5'\r\n    case 'jpg':\r\n    case 'jpeg':\r\n    case 'png':\r\n    case 'gif':\r\n    case 'svg': return 'fa-camera'\r\n    case 'js': return entity.isSharedHelper ? 'fa-cogs' : 'fa-cog'\r\n    case 'css': return 'fa-css3'\r\n    default: return 'fa-file-o '\r\n  }\r\n})\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/main_dev.js\n **/","import React, { Component } from 'react'\r\nimport AssetUploadButton from './AssetUploadButton.js'\r\nimport Studio, { TextEditor } from 'jsreport-studio'\r\nimport superagent from 'superagent'\r\nimport Promise from 'bluebird'\r\nimport CopyToClipboard from 'react-copy-to-clipboard'\r\n\r\n// Studio.api currently always open dialogs on failures and that is what we don't want, so arbitrary implementaiton here\r\nconst getTextFromApi = (path) => {\r\n  return new Promise((resolve, reject) => {\r\n    const request = superagent.get(Studio.resolveUrl(path))\r\n    request.end((err, { text } = {}) => err ? reject(new Error(text || err.toString())) : resolve(text))\r\n  })\r\n}\r\n\r\nexport default class FileEditor extends Component {\r\n  constructor () {\r\n    super()\r\n    this.state = { }\r\n  }\r\n\r\n  async componentDidMount () {\r\n    const { entity } = this.props\r\n\r\n    var content = entity.content\r\n    if (entity.link) {\r\n      try {\r\n        await Studio.saveEntity(entity._id)\r\n        const ab = await Studio.api.get(`assets/content/${entity.name}`, { responseType: 'arraybuffer' })\r\n        const str = String.fromCharCode.apply(null, new Uint8Array(ab))\r\n        const fixedStr = decodeURIComponent(escape(str))\r\n        content = btoa(unescape(encodeURIComponent(fixedStr)))\r\n      } catch (e) {\r\n        this.setState({ loadError: e })\r\n        throw e\r\n      }\r\n    }\r\n\r\n    this.setState({ content: content })\r\n  }\r\n\r\n  async componentDidUpdate (prevProps) {\r\n    const { entity } = this.props\r\n\r\n    if (entity.link && (!this.state.link || prevProps.entity.link !== entity.link) && !this.state.loadFailed) {\r\n      try {\r\n        const link = await getTextFromApi(`assets/link/${entity.link}`)\r\n        this.setState({ link: link })\r\n      } catch (e) {\r\n        this.setState({ link: e.message })\r\n      }\r\n    }\r\n  }\r\n\r\n  isImage (entity) {\r\n    return entity.name.match(/\\.(jpeg|jpg|gif|png|svg)$/) != null\r\n  }\r\n\r\n  isFont (entity) {\r\n    return entity.name.match(/\\.(otf|woff|ttf|eot|woff2)$/) != null\r\n  }\r\n\r\n  getFormat (extension) {\r\n    switch (extension) {\r\n      case 'ttf': return 'truetype'\r\n      case 'woff2': return 'woff2'\r\n      case 'eot': return 'embedded-opentype'\r\n      default: return 'woff'\r\n    }\r\n  }\r\n\r\n  getEmbeddingCode (entity) {\r\n    let parts = entity.name.split('.')\r\n    let extension = parts[parts.length - 1]\r\n\r\n    if (this.isImage(entity)) {\r\n      return '<img src=\"{#asset ' + entity.name + ' @encoding=dataURI}\" />'\r\n    }\r\n\r\n    if (this.isFont(entity)) {\r\n      return `@font-face {\r\n  font-family: '${parts[0]}';\r\n  src: url({#asset ${entity.name} @encoding=dataURI});\r\n  format('${this.getFormat(extension)}');\r\n}`\r\n    }\r\n\r\n    return '{#asset ' + entity.name + ' @encoding=utf8}'\r\n  }\r\n\r\n  renderEditor (entity) {\r\n    let parts = entity.name.split('.')\r\n    let extension = parts[parts.length - 1]\r\n\r\n    if (this.isImage(entity)) {\r\n      return <div style={{overflow: 'auto'}}><img src={Studio.resolveUrl(`assets/content/${entity.name}?v=${new Date().getTime()}`)}\r\n        style={{display: 'block', margin: '3rem auto'}} /></div>\r\n    }\r\n\r\n    if (this.isFont(entity)) {\r\n      let newStyle = document.createElement('style')\r\n      newStyle.appendChild(document.createTextNode(`@font-face {\r\n         font-family: '${parts[0]}';\r\n         src: url('${Studio.resolveUrl('/assets/content/' + entity.name)}');\r\n         format('${extension === 'ttf' ? 'truetype' : 'woff'}');\r\n        }`))\r\n\r\n      document.head.appendChild(newStyle)\r\n\r\n      return <div style={{overflow: 'auto', fontFamily: parts[0], padding: '2rem'}}><h1> Hello world font {entity.name}</h1>\r\n\r\n        <p>\r\n          Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's\r\n          standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to\r\n          make a type specimen book.\r\n        </p>\r\n      </div>\r\n    }\r\n\r\n    let mode = parts[parts.length - 1]\r\n    if (extension === 'js') {\r\n      mode = 'javascript'\r\n    }\r\n    if (extension === 'html') {\r\n      mode = 'handlebars'\r\n    }\r\n\r\n    const content = ((entity.content || entity.forceUpdate) ? entity.content : this.state.content) || ''\r\n\r\n    return <TextEditor\r\n      name={entity._id}\r\n      mode={mode}\r\n      value={decodeURIComponent(escape(atob(content)))}\r\n      onUpdate={(v) => this.props.onUpdate(Object.assign({}, entity, {content: btoa(unescape(encodeURIComponent(v))), forceUpdate: true}))} />\r\n  }\r\n\r\n  render () {\r\n    const { entity } = this.props\r\n    const { link } = this.state\r\n    const downloadUrl = Studio.resolveUrl(`assets/content/${entity.name}?download=true`)\r\n\r\n    const toolbarButtonStyle = {\r\n      color: '#007ACC',\r\n      fontSize: '1.2rem'\r\n    }\r\n\r\n    return (<div className='block'>\r\n      <div style={{padding: '0.6rem 0 0.4rem 0', backgroundColor: '#F6F6F6'}}>\r\n        <div>\r\n          <CopyToClipboard text={this.getEmbeddingCode(entity)}>\r\n            <a className='button' style={toolbarButtonStyle} title='Coppy the embedding code to clipboard'>\r\n              <i className='fa fa-clipboard' />\r\n            </a>\r\n          </CopyToClipboard>\r\n\r\n          <a className='button' style={toolbarButtonStyle} target='_blank' href={downloadUrl} title='Download asset'>\r\n            <i className='fa fa-download' />\r\n          </a>\r\n          {entity.link\r\n            ? <span style={{margin: '0.6rem'}}>{link}</span> : <a className='button' style={toolbarButtonStyle} title='Upload asset'\r\n              onClick={() => AssetUploadButton.OpenUpload()}><i\r\n                className='fa fa-upload' /></a>}\r\n          <a className='button' style={{...toolbarButtonStyle, marginRight: 'auto'}} target='_blank' title='Help'\r\n            href='http://jsreport.net/learn/assets'>\r\n            <i className='fa fa-question' />\r\n          </a>\r\n        </div>\r\n      </div>\r\n      {this.renderEditor(entity)}\r\n    </div>)\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/AssetEditor.js\n **/","module.exports = Studio.libraries['react'];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio.libraries['react']\"\n ** module id = 2\n ** module chunks = 0\n **/","import React, { Component } from 'react'\r\nimport Studio from 'jsreport-studio'\r\n\r\nlet _fileUploadButton\r\n\r\nexport default class AssetUploadButton extends Component {\r\n  // we need to have global action in main_dev which is triggered when users clicks on + on images\r\n  // this triggers invisible button in the toolbar\r\n  static OpenUpload () {\r\n    _fileUploadButton.openFileDialog('edit')\r\n  }\r\n\r\n  static OpenUploadNew () {\r\n    _fileUploadButton.openFileDialog('new')\r\n  }\r\n\r\n  componentDidMount () {\r\n    _fileUploadButton = this\r\n  }\r\n\r\n  upload (e) {\r\n    if (!e.target.files.length) {\r\n      return\r\n    }\r\n\r\n    const file = e.target.files[0]\r\n    const reader = new FileReader()\r\n\r\n    reader.onloadend = async () => {\r\n      this.refs.file.value = ''\r\n      if (this.type === 'new') {\r\n        if (Studio.workspaces) {\r\n          await Studio.workspaces.save()\r\n        }\r\n\r\n        let response = await Studio.api.post('/odata/assets', {\r\n          data: {\r\n            content: reader.result.substring(reader.result.indexOf('base64,') + 'base64,'.length),\r\n            name: file.name\r\n          }\r\n        })\r\n        response.__entitySet = 'assets'\r\n\r\n        Studio.addExistingEntity(response)\r\n        Studio.openTab(Object.assign({}, response))\r\n      }\r\n\r\n      if (this.type === 'edit') {\r\n        if (Studio.workspaces) {\r\n          Studio.updateEntity({\r\n            name: this.props.tab.entity.name,\r\n            content: reader.result.substring(reader.result.indexOf('base64,') + 'base64,'.length)\r\n          })\r\n\r\n          await Studio.workspaces.save()\r\n        } else {\r\n          await Studio.api.patch(`/odata/assets(${this.props.tab.entity._id})`, {\r\n            data: {\r\n              content: reader.result.substring(reader.result.indexOf('base64,') + 'base64,'.length),\r\n              link: null\r\n            }\r\n          })\r\n          Studio.loadEntity(this.props.tab.entity._id, true)\r\n        }\r\n      }\r\n    }\r\n\r\n    reader.onerror = function () {\r\n      alert('There was an error reading the file!')\r\n    }\r\n\r\n    reader.readAsDataURL(file)\r\n  }\r\n\r\n  openFileDialog (type) {\r\n    this.type = type\r\n\r\n    this.refs.file.dispatchEvent(new MouseEvent('click', {\r\n      'view': window,\r\n      'bubbles': false,\r\n      'cancelable': true\r\n    }))\r\n  }\r\n\r\n  renderUpload () {\r\n    return <input type='file' key='file' ref='file' style={{display: 'none'}} onChange={(e) => this.upload(e)} />\r\n  }\r\n\r\n  render () {\r\n    return this.renderUpload(true)\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/AssetUploadButton.js\n **/","module.exports = Studio;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio\"\n ** module id = 4\n ** module chunks = 0\n **/","module.exports = Studio.libraries['superagent'];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio.libraries['superagent']\"\n ** module id = 5\n ** module chunks = 0\n **/","module.exports = Studio.libraries['bluebird'];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio.libraries['bluebird']\"\n ** module id = 6\n ** module chunks = 0\n **/","'use strict';\n\nvar _require = require('./Component'),\n    CopyToClipboard = _require.CopyToClipboard;\n\nmodule.exports = CopyToClipboard;\n//# sourceMappingURL=index.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/react-copy-to-clipboard/lib/index.js\n ** module id = 7\n ** module chunks = 0\n **/","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CopyToClipboard = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _copyToClipboard = require('copy-to-clipboard');\n\nvar _copyToClipboard2 = _interopRequireDefault(_copyToClipboard);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nvar CopyToClipboard = _react2.default.createClass({\n  displayName: 'CopyToClipboard',\n\n  propTypes: {\n    text: _react2.default.PropTypes.string.isRequired,\n    children: _react2.default.PropTypes.element.isRequired,\n    onCopy: _react2.default.PropTypes.func,\n    options: _react2.default.PropTypes.shape({\n      debug: _react2.default.PropTypes.bool,\n      message: _react2.default.PropTypes.string\n    })\n  },\n\n  onClick: function onClick(event) {\n    var _props = this.props,\n        text = _props.text,\n        onCopy = _props.onCopy,\n        children = _props.children,\n        options = _props.options;\n\n\n    var elem = _react2.default.Children.only(children);\n\n    var result = (0, _copyToClipboard2.default)(text, options);\n\n    if (onCopy) {\n      onCopy(text, result);\n    }\n\n    // Bypass onClick if it was present\n    if (elem && elem.props && typeof elem.props.onClick === 'function') {\n      elem.props.onClick(event);\n    }\n  },\n  render: function render() {\n    var _props2 = this.props,\n        _text = _props2.text,\n        _onCopy = _props2.onCopy,\n        _options = _props2.options,\n        children = _props2.children,\n        props = _objectWithoutProperties(_props2, ['text', 'onCopy', 'options', 'children']);\n\n    var elem = _react2.default.Children.only(children);\n\n    return _react2.default.cloneElement(elem, _extends({}, props, { onClick: this.onClick }));\n  }\n});\nexports.CopyToClipboard = CopyToClipboard;\n//# sourceMappingURL=Component.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/react-copy-to-clipboard/lib/Component.js\n ** module id = 8\n ** module chunks = 0\n **/","'use strict';\n\nvar deselectCurrent = require('toggle-selection');\n\nvar defaultMessage = 'Copy to clipboard: #{key}, Enter';\n\nfunction format(message) {\n  var copyKey = (/mac os x/i.test(navigator.userAgent) ? '⌘' : 'Ctrl') + '+C';\n  return message.replace(/#{\\s*key\\s*}/g, copyKey);\n}\n\nfunction copy(text, options) {\n  var debug, message, reselectPrevious, range, selection, mark, success = false;\n  if (!options) { options = {}; }\n  debug = options.debug || false;\n  try {\n    reselectPrevious = deselectCurrent();\n\n    range = document.createRange();\n    selection = document.getSelection();\n\n    mark = document.createElement('span');\n    mark.textContent = text;\n    // reset user styles for span element\n    mark.style.all = 'unset';\n    // prevents scrolling to the end of the page\n    mark.style.position = 'fixed';\n    mark.style.top = 0;\n    mark.style.clip = 'rect(0, 0, 0, 0)';\n    // used to preserve spaces and line breaks\n    mark.style.whiteSpace = 'pre';\n    // do not inherit user-select (it may be `none`)\n    mark.style.webkitUserSelect = 'text';\n    mark.style.MozUserSelect = 'text';\n    mark.style.msUserSelect = 'text';\n    mark.style.userSelect = 'text';\n\n    document.body.appendChild(mark);\n\n    range.selectNode(mark);\n    selection.addRange(range);\n\n    var successful = document.execCommand('copy');\n    if (!successful) {\n      throw new Error('copy command was unsuccessful');\n    }\n    success = true;\n  } catch (err) {\n    debug && console.error('unable to copy using execCommand: ', err);\n    debug && console.warn('trying IE specific stuff');\n    try {\n      window.clipboardData.setData('text', text);\n      success = true;\n    } catch (err) {\n      debug && console.error('unable to copy using clipboardData: ', err);\n      debug && console.error('falling back to prompt');\n      message = format('message' in options ? options.message : defaultMessage);\n      window.prompt(message, text);\n    }\n  } finally {\n    if (selection) {\n      if (typeof selection.removeRange == 'function') {\n        selection.removeRange(range);\n      } else {\n        selection.removeAllRanges();\n      }\n    }\n\n    if (mark) {\n      document.body.removeChild(mark);\n    }\n    reselectPrevious();\n  }\n\n  return success;\n}\n\nmodule.exports = copy;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/copy-to-clipboard/index.js\n ** module id = 9\n ** module chunks = 0\n **/","\nmodule.exports = function () {\n  var selection = document.getSelection();\n  if (!selection.rangeCount) {\n    return function () {};\n  }\n  var active = document.activeElement;\n\n  var ranges = [];\n  for (var i = 0; i < selection.rangeCount; i++) {\n    ranges.push(selection.getRangeAt(i));\n  }\n\n  switch (active.tagName.toUpperCase()) { // .toUpperCase handles XHTML\n    case 'INPUT':\n    case 'TEXTAREA':\n      active.blur();\n      break;\n\n    default:\n      active = null;\n      break;\n  }\n\n  selection.removeAllRanges();\n  return function () {\n    selection.type === 'Caret' &&\n    selection.removeAllRanges();\n\n    if (!selection.rangeCount) {\n      ranges.forEach(function(range) {\n        selection.addRange(range);\n      });\n    }\n\n    active &&\n    active.focus();\n  };\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/toggle-selection/index.js\n ** module id = 10\n ** module chunks = 0\n **/","import React, {Component, PropTypes} from 'react'\r\nimport AssetUploadButton from './AssetUploadButton.js'\r\nimport Studio from 'jsreport-studio'\r\n\r\nexport default class NewAssetModal extends Component {\r\n  static propTypes = {\r\n    close: PropTypes.func.isRequired\r\n  }\r\n\r\n  constructor () {\r\n    super()\r\n    this.state = { isLink: false }\r\n  }\r\n\r\n  handleKeyPress (e) {\r\n    if (e.key === 'Enter') {\r\n      this.createAsset()\r\n    }\r\n  }\r\n\r\n  // the modal component for some reason after open focuses the panel itself\r\n  componentDidMount () {\r\n    setTimeout(() => this.refs.name.focus(), 0)\r\n  }\r\n\r\n  async createAsset (e) {\r\n    let entity = {}\r\n\r\n    if (!this.state.isLink && (!this.refs.name.value || this.refs.name.value.indexOf('.')) < 0) {\r\n      return this.setState({ error: 'name should include file extension, for example foo.js' })\r\n    }\r\n\r\n    if (this.state.isLink) {\r\n      entity.link = this.refs.link.value\r\n    } else {\r\n      entity.name = this.refs.name.value\r\n    }\r\n\r\n    try {\r\n      if (Studio.workspaces) {\r\n        await Studio.workspaces.save()\r\n      }\r\n\r\n      let response = await Studio.api.post('/odata/assets', {\r\n        data: entity\r\n      })\r\n      response.__entitySet = 'assets'\r\n\r\n      Studio.addExistingEntity(response)\r\n      Studio.openTab(response)\r\n      this.props.close()\r\n    } catch (e) {\r\n      this.setState({ error: e.message })\r\n    }\r\n  }\r\n\r\n  render () {\r\n    const { isLink, error } = this.state\r\n\r\n    return <div>\r\n      {isLink ? <div className='form-group'>\r\n        <label>Relative or absolute path to existing file</label>\r\n        <input type='text' name='link' ref='link' />\r\n      </div> : <div className='form-group'>\r\n        <label>Name</label>\r\n        <input type='text' name='name' ref='name' placeholder='styles.css' onKeyPress={(e) => this.handleKeyPress(e)} />\r\n      </div>\r\n      }\r\n      {Studio.extensions.assets.options.allowAssetsLinkedToFiles !== false ? <div className='form-group'>\r\n        <label>link to existing file</label>\r\n        <input\r\n          type='checkbox' checked={isLink}\r\n          onChange={() => this.setState({ isLink: !isLink })} />\r\n      </div> : <div />}\r\n      <div className='form-group'>\r\n        <span\r\n          style={{color: 'red', display: error ? 'block' : 'none'}}>{error}</span>\r\n      </div>\r\n      <div className='form-group' style={{opacity: 0.8}}>\r\n        <hr />\r\n        <span>You can use assets to embed any kind of static content into report template.<br />\r\n          This can be for example css style, image, font, html or even javascript shared helpers. <br />See the <a\r\n            target='_blank' title='Help' href='http://jsreport.net/learn/assets'>documentation</a> for details.\r\n        </span>\r\n      </div>\r\n      <div className='button-bar'>\r\n        <button\r\n          className='button confirmation'\r\n          onClick={() => { this.props.close(); AssetUploadButton.OpenUploadNew() }}>Upload\r\n        </button>\r\n        <button onClick={() => this.createAsset()} className={'button confirmation'}>Ok</button>\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/NewAssetModal.js\n **/","import React, { Component } from 'react'\r\nimport Studio from 'jsreport-studio'\r\n\r\nexport default class AssetProperties extends Component {\r\n  static title (entity, entities) {\r\n    return `asset ${entity.link ? '(link)' : ''}`\r\n  }\r\n\r\n  render () {\r\n    const { entity, onChange } = this.props\r\n\r\n    return (\r\n      <div>\r\n        {Studio.extensions.assets.options.allowAssetsLinkedToFiles !== false ? <div className='form-group'>\r\n          <label>link</label>\r\n          <input type='text' value={entity.link || ''}\r\n            onChange={(v) => onChange({_id: entity._id, link: v.target.value})} />\r\n        </div> : <div />}\r\n        <div className='form-group'>\r\n          <label>shared helpers attached to each template</label>\r\n          <input\r\n            type='checkbox' checked={entity.isSharedHelper === true}\r\n            onChange={(v) => onChange({_id: entity._id, isSharedHelper: v.target.checked})} />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/AssetProperties.js\n **/"],"sourceRoot":""}