{"version":3,"sources":["webpack:///webpack/bootstrap 97f284e2b52bdf09e7e7","webpack:///./studio/main_dev.js","webpack:///./studio/Properties.js","webpack:///external \"Studio.libraries['react']\"","webpack:///external \"Studio\""],"names":["addApiSpec","options","language","addPropertiesComponent","title","entity","__entitySet","Properties","entities","Object","keys","filter","k","map","removeInvalidDataReferences","props","onChange","resources","items","length","updatedResources","s","shortid","_id","defaultLanguage","data","selectData","selectValues","event","aitems","el","target","assign","i","selected","value","push","entitySet","v","scripts","name","getName","foundData","sc","d","getSelectedResources","join"],"mappings":"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","file":"./studio/main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 97f284e2b52bdf09e7e7\n **/","import Properties from './Properties.js'\nimport Studio from 'jsreport-studio'\n\nStudio.addApiSpec({\n  options: {\n    language: 'en'\n  }\n})\n\nStudio.addPropertiesComponent(Properties.title, Properties, (entity) => entity.__entitySet === 'templates')\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/main_dev.js\n **/","import React, { Component } from 'react'\n\nexport default class Properties extends Component {\n  selectData (entities) {\n    return Object.keys(entities).filter((k) => entities[k].__entitySet === 'data').map((k) => entities[k])\n  }\n\n  static getSelectedResources (entity, entities) {\n    const getName = (s) => {\n      const foundData = Object.keys(entities).map((k) => entities[k]).filter((sc) => sc.shortid === s.shortid)\n\n      return foundData.length ? foundData[0].name : ''\n    }\n\n    return ((entity.resources || {}).items || []).map((d) => ({\n      ...d,\n      name: getName(d)\n    }))\n  }\n\n  componentDidMount () {\n    this.removeInvalidDataReferences()\n  }\n\n  componentDidUpdate () {\n    this.removeInvalidDataReferences()\n  }\n\n  static title (entity, entities) {\n    if (!entity.resources) {\n      return 'resources'\n    }\n\n    return `resources: ${entity.resources.defaultLanguage || ''} ` + Properties.getSelectedResources(entity, entities).map((s) => s.name).join(', ')\n  }\n\n  removeInvalidDataReferences () {\n    const { entity, entities, onChange } = this.props\n\n    if (!entity.resources || !entity.resources.items.length) {\n      return\n    }\n\n    const updatedResources = entity.resources.items.filter((s) => Object.keys(entities).filter((k) => entities[k].__entitySet === 'data' && entities[k].shortid === s.shortid).length)\n\n    if (updatedResources.length !== entity.resources.items.length) {\n      onChange({ _id: entity._id, resources: { defaultLanguage: entity.defaultLanguage, items: updatedResources } })\n    }\n  }\n\n  render () {\n    const { entity, entities, onChange } = this.props\n    const data = this.selectData(entities)\n\n    const selectValues = (event, aitems) => {\n      const el = event.target\n      let items = Object.assign([], items)\n\n      for (var i = 0; i < el.options.length; i++) {\n        if (el.options[i].selected) {\n          if (!items.filter((s) => s.shortid === el.options[i].value).length) {\n            items.push({ shortid: el.options[i].value })\n          }\n        } else {\n          if (items.filter((s) => s.shortid === el.options[i].value).length) {\n            items = items.filter((s) => s.shortid !== el.options[i].value)\n          }\n        }\n      }\n\n      return items.map((i) => ({ ...i, entitySet: 'data' }))\n    }\n\n    const items = (entity.resources || {}).items || []\n    const defaultLanguage = (entity.resources || {}).defaultLanguage\n\n    return (\n      <div className='properties-section'>\n        <div className='form-group'><label>Default language <a href='http://jsreport.net/learn/resources' target='_blank'><i className='fa fa-question' /> </a></label>\n          <input\n            type='text' placeholder='en' value={defaultLanguage || ''}\n            onChange={(v) => onChange({_id: entity._id, resources: {defaultLanguage: v.target.value, items: items}})} />\n        </div>\n        <div className='form-group'>\n          <select\n            title='Use CTRL to deselect item and also to select multiple options'\n            multiple size='7' value={items.map((s) => s.shortid)}\n            onChange={(v) => onChange({_id: entity._id, resources: {items: selectValues(v, entity.scripts), defaultLanguage: defaultLanguage}})}>\n            {data.map((s) => <option key={s.shortid} value={s.shortid}>{s.name}</option>)}\n          </select>\n        </div>\n      </div>\n    )\n  }\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/Properties.js\n **/","module.exports = Studio.libraries['react'];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio.libraries['react']\"\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = Studio;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio\"\n ** module id = 3\n ** module chunks = 0\n **/"],"sourceRoot":""}