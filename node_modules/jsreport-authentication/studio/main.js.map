{"version":3,"sources":["webpack:///webpack/bootstrap 81e9e0e7a4401c709197","webpack:///./studio/main_dev.js","webpack:///./studio/UserEditor.js","webpack:///external \"Studio.libraries['react']\"","webpack:///./studio/ChangePasswordModal.js","webpack:///external \"Studio\"","webpack:///./studio/LogoutSettingsButton.js","webpack:///./studio/ChangePasswordSettingsButton.js","webpack:///./studio/ChangePasswordButton.js","webpack:///./studio/NewUserModal.js"],"names":["initializeListeners","unshift","api","get","response","tenant","authentication","user","isAdmin","addEntitySet","name","faIcon","visibleName","nameAttribute","onNew","openModal","entityTreePosition","addEditorComponent","addToolbarComponent","username","DataEditor","props","entity","__isNew","password","propTypes","PropTypes","object","isRequired","onUpdate","func","ChangePasswordModal","state","options","close","data","newPassword","refs","newPassword1","value","oldPassword","post","shortid","newPassword2","setState","apiError","message","passwordError","validatePassword","color","display","changePassword","LogoutSettingsButton","logout","click","cursor","resolveUrl","ChangePasswordButton","tab","__entitySet","e","NewUserModal","userNameError","password1","addExistingEntity","password2","validateUsername","createUser"],"mappings":"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","file":"./studio/main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 81e9e0e7a4401c709197\n **/","import UserEditor from './UserEditor.js'\nimport LogoutSettingsButton from './LogoutSettingsButton.js'\nimport ChangePasswordSettingsButton from './ChangePasswordSettingsButton.js'\nimport ChangePasswordButton from './ChangePasswordButton.js'\nimport Studio from 'jsreport-studio'\nimport NewUserModal from './NewUserModal.js'\n\n// we want to be at the front, because other extension like scheduling relies on loaded user\nStudio.initializeListeners.unshift(async () => {\n  const response = await Studio.api.get('/api/settings')\n\n  if (!response.tenant) {\n    // authentication not enabled in config\n    return\n  }\n\n  Studio.authentication = { user: response.tenant }\n\n  if (Studio.authentication.user.isAdmin) {\n    Studio.addEntitySet({\n      name: 'users',\n      faIcon: 'fa-user',\n      visibleName: 'user',\n      nameAttribute: 'username',\n      onNew: () => Studio.openModal(NewUserModal),\n      entityTreePosition: 200\n    })\n    Studio.addEditorComponent('users', UserEditor)\n    Studio.addToolbarComponent(ChangePasswordButton)\n  }\n\n  Studio.addToolbarComponent(ChangePasswordSettingsButton, 'settings')\n  Studio.addToolbarComponent(() => <div className='toolbar-button'><span><i\n    className='fa fa-user' /> {Studio.authentication.user.username}</span></div>, 'settingsBottom')\n  Studio.addToolbarComponent(LogoutSettingsButton, 'settingsBottom')\n})\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/main_dev.js\n **/","import React, { Component } from 'react'\nimport ChangePasswordModal from './ChangePasswordModal.js'\nimport Studio from 'jsreport-studio'\n\nexport default class DataEditor extends Component {\n  static propTypes = {\n    entity: React.PropTypes.object.isRequired,\n    onUpdate: React.PropTypes.func.isRequired\n  }\n\n  componentDidMount () {\n    if (this.props.entity.__isNew && !this.props.entity.password) {\n      Studio.openModal(ChangePasswordModal, { entity: this.props.entity })\n    }\n  }\n\n  render () {\n    const { entity } = this.props\n\n    return <div className='custom-editor'>\n      <h1><i className='fa fa-user' /> {entity.username}</h1>\n    </div>\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/UserEditor.js\n **/","module.exports = Studio.libraries['react'];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio.libraries['react']\"\n ** module id = 2\n ** module chunks = 0\n **/","import React, {Component, PropTypes} from 'react'\nimport Studio from 'jsreport-studio'\n\nexport default class ChangePasswordModal extends Component {\n  static propTypes = {\n    close: PropTypes.func.isRequired,\n    options: PropTypes.object.isRequired\n  }\n\n  constructor () {\n    super()\n    this.state = {}\n  }\n\n  async changePassword () {\n    const { entity } = this.props.options\n    const { close } = this.props\n\n    try {\n      let data = {\n        newPassword: this.refs.newPassword1.value\n      }\n\n      if (!Studio.authentication.user.isAdmin) {\n        data.oldPassword = this.refs.oldPassword.value\n      }\n\n      await Studio.api.post(`/api/users/${entity.shortid}/password`, { data: data })\n      this.refs.newPassword1.value = ''\n      this.refs.newPassword2.value = ''\n      close()\n    } catch (e) {\n      this.setState({ apiError: e.message })\n    }\n  }\n\n  validatePassword () {\n    this.setState(\n      {\n        passwordError: this.refs.newPassword2.value && this.refs.newPassword2.value !== this.refs.newPassword1.value,\n        apiError: null\n      })\n  }\n\n  render () {\n    return <div>\n      {Studio.authentication.user.isAdmin ? '' : <div className='form-group'>\n        <label>old password</label>\n        <input type='password' ref='oldPassword' />\n      </div>\n      }\n      <div className='form-group'>\n        <label>new password</label>\n        <input type='password' ref='newPassword1' />\n      </div>\n      <div className='form-group'>\n        <label>new password verification</label>\n        <input type='password' ref='newPassword2' onChange={() => this.validatePassword()} />\n      </div>\n      <div className='form-group'>\n        <span style={{color: 'red', display: this.state.passwordError ? 'block' : 'none'}}>password doesn't match</span>\n        <span style={{color: 'red', display: this.state.apiError ? 'block' : 'none'}}>{this.state.apiError}</span>\n      </div>\n      <div className='button-bar'>\n        <button className='button confirmation' onClick={() => this.changePassword()}>ok</button>\n      </div>\n    </div>\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/ChangePasswordModal.js\n **/","module.exports = Studio;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio\"\n ** module id = 4\n ** module chunks = 0\n **/","import React, { Component } from 'react'\nimport Studio from 'jsreport-studio'\n\nexport default class LogoutSettingsButton extends Component {\n  render () {\n    return <div>\n      <div\n        onClick={() => this.refs.logout.click()} style={{ cursor: 'pointer' }}>\n        <form method='POST' action={Studio.resolveUrl('/logout')}>\n          <input ref='logout' type='submit' id='logoutBtn' style={{ display: 'none' }} />\n        </form>\n        <i className='fa fa-power-off' /> Logout\n      </div>\n    </div>\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/LogoutSettingsButton.js\n **/","import ChangePasswordModal from './ChangePasswordModal.js'\nimport Studio from 'jsreport-studio'\n\nexport default (props) => {\n  return Studio.authentication.user.isAdmin ? <span /> : <div>\n    <a\n      id='changePassword'\n      onClick={() => Studio.openModal(ChangePasswordModal, { entity: Studio.authentication.user })}\n      style={{cursor: 'pointer'}}><i className='fa fa-key' /> Change password\n    </a>\n  </div>\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/ChangePasswordSettingsButton.js\n **/","import React, { Component } from 'react'\nimport ChangePasswordModal from './ChangePasswordModal.js'\nimport Studio from 'jsreport-studio'\n\nexport default class ChangePasswordButton extends Component {\n  static propTypes = {\n    tab: React.PropTypes.object,\n    onUpdate: React.PropTypes.func.isRequired\n  }\n\n  render () {\n    if (!this.props.tab || !this.props.tab.entity || this.props.tab.entity.__entitySet !== 'users') {\n      return <span />\n    }\n\n    return <div>\n      <div\n        className='toolbar-button'\n        onClick={(e) => Studio.openModal(ChangePasswordModal, { entity: this.props.tab.entity })}>\n        <i className='fa fa-key' /> Change Password\n      </div>\n    </div>\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/ChangePasswordButton.js\n **/","import React, {Component, PropTypes} from 'react'\nimport Studio from 'jsreport-studio'\n\nexport default class NewUserModal extends Component {\n  static propTypes = {\n    close: PropTypes.func.isRequired\n  }\n\n  constructor () {\n    super()\n    this.state = {}\n  }\n\n  async createUser () {\n    if (!this.refs.username.value) {\n      return this.setState({ userNameError: true })\n    }\n\n    if (!this.refs.password1.value) {\n      return this.setState({ passwordError: true })\n    }\n\n    try {\n      let response = await Studio.api.post('/odata/users', {\n        data: {\n          username: this.refs.username.value,\n          password: this.refs.password1.value\n        }\n      })\n      response.__entitySet = 'users'\n\n      Studio.addExistingEntity(response)\n      this.props.close()\n    } catch (e) {\n      this.setState({ apiError: e.message })\n    }\n  }\n\n  validatePassword () {\n    this.setState(\n      {\n        passwordError: this.refs.password2.value && this.refs.password2.value !== this.refs.password1.value,\n        apiError: null\n      })\n  }\n\n  validateUsername () {\n    this.setState(\n      {\n        userNameError: this.refs.username.value === '',\n        apiError: null\n      })\n  }\n\n  render () {\n    return <div>\n      <div className='form-group'>\n        <label>Username</label>\n        <input type='text' ref='username' onChange={() => this.validateUsername()} />\n      </div>\n      <div className='form-group'>\n        <label>Password</label>\n        <input type='password' ref='password1' />\n      </div>\n      <div className='form-group'>\n        <label>Password verification</label>\n        <input type='password' ref='password2' onChange={() => this.validatePassword()} />\n      </div>\n      <div className='form-group'>\n        <span style={{color: 'red', display: this.state.passwordError ? 'block' : 'none'}}>password doesn't match</span>\n        <span\n          style={{color: 'red', display: this.state.userNameError ? 'block' : 'none'}}>username must be filled</span>\n        <span style={{color: 'red', display: this.state.apiError ? 'block' : 'none'}}>{this.state.apiError}</span>\n      </div>\n      <div className='button-bar'>\n        <button className='button confirmation' onClick={() => this.createUser()}>ok</button>\n      </div>\n    </div>\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/NewUserModal.js\n **/"],"sourceRoot":""}